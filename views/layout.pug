// views/layout.pug
doctype html
html(lang="nl")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title= typeof title !== 'undefined' ? title : 'Sakila'
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")

body.p-4
  // NAVBAR â€“ alleen tonen als ingelogd en niet op /auth/*
  if sessionUser && !(currentPath && currentPath.startsWith('/auth'))
    nav.navbar.navbar-expand-lg.navbar-light.bg-light.mb-4
      .container
        a.navbar-brand(href='/') Sakila
        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navMain', aria-controls='navMain', aria-expanded='false', aria-label='Toggle navigation')
          span.navbar-toggler-icon
        #navMain.collapse.navbar-collapse
          - const path = currentPath || ''
          ul.navbar-nav.me-auto.mb-2.mb-lg-0
            li.nav-item
              a.nav-link(class=path.startsWith('/users') ? 'active' : '', href='/users') Klantenoverzicht
            li.nav-item
              a.nav-link(class=path.startsWith('/films') ? 'active' : '', href='/films/overview') Films
            li.nav-item
              a.nav-link(class=path.startsWith('/rentals/active') ? 'active' : '', href='/rentals/active') Verhuurd
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href='/auth/logout') Logout

  // Pagina-inhoud
  block content

  // Scripts
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
  script.
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.alert[data-autohide="true"]').forEach(function (el) {
        setTimeout(function () {
          try { bootstrap.Alert.getOrCreateInstance(el).close(); }
          catch (e) { el.remove(); }
        }, 5000);
      });
    });
  // Pagina-specifieke scripts
  block scripts
